<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ChefOS Orders</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="app-container">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1><i class="fas fa-utensils"></i> ChefOS Orders</h1>
      </div>

      <div class="sidebar-nav">
        <div class="nav-section">
          <h3>Menu</h3>
          <ul class="nav-links">
            <li><a href="pos.html"><i class="fas fa-cash-register"></i> POS</a></li>
            <li><a href="orders.html" class="active"><i class="fas fa-list"></i> Orders</a></li>
            <li><a href="kds.html"><i class="fas fa-utensils"></i> ChefOS Line</a></li>
          </ul>
        </div>

        <div class="nav-section">
          <h3>Management</h3>
          <ul class="nav-links">
            <li><a href="inventory.html"><i class="fas fa-boxes"></i> ChefOS Stock</a></li>
            <li><a href="reports.html"><i class="fas fa-chart-bar"></i> ChefOS Insights</a></li>
            <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
          </ul>
        </div>
      </div>

      <div class="help-center">
        <h4><i class="fas fa-life-ring"></i> Help Center</h4>
        <div class="contact-info">
          <div><i class="fas fa-envelope"></i> support@chefos.com</div>
          <div><i class="fas fa-phone"></i> +1 (415) 123-4567</div>
        </div>
      </div>

      <a href="login.html" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
    </aside>

    <!-- MAIN CONTENT -->
    <div class="main-content">

      <div class="top-bar">
        <div class="time-display" id="currentTime"></div>
        <div class="user-info">
          <div class="user-avatar">DM</div>
          <div>
            <div style="font-weight:600;">Derek Mungoriwo</div>
            <div style="font-size:14px; color:var(--gray);">Manager</div>
          </div>
        </div>
      </div>

      <!-- ðŸ”§ FIX: flex-safe container -->
      <div class="orders-container" style="flex:1; min-height:0; overflow:auto;">

        <div class="orders-header">
          <h2><i class="fas fa-clipboard-list"></i> Order Management</h2>
          <div class="order-filters">
            <button class="filter-btn active" data-filter="all">All Orders</button>
            <button class="filter-btn" data-filter="pending">Pending</button>
            <button class="filter-btn" data-filter="preparing">Preparing</button>
            <button class="filter-btn" data-filter="ready">Ready</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
          </div>
        </div>

        <!-- STATS -->
        <div class="orders-stats">
          <div class="stat-card">
            <div class="stat-icon stat-pending"><i class="fas fa-clock"></i></div>
            <div class="stat-info"><h3 id="pending-count">0</h3><p>Pending</p></div>
          </div>

          <div class="stat-card">
            <div class="stat-icon stat-preparing"><i class="fas fa-fire"></i></div>
            <div class="stat-info"><h3 id="preparing-count">0</h3><p>Preparing</p></div>
          </div>

          <div class="stat-card">
            <div class="stat-icon stat-ready"><i class="fas fa-check-circle"></i></div>
            <div class="stat-info"><h3 id="ready-count">0</h3><p>Ready</p></div>
          </div>

          <div class="stat-card">
            <div class="stat-icon stat-completed"><i class="fas fa-check-double"></i></div>
            <div class="stat-info"><h3 id="completed-count">0</h3><p>Completed</p></div>
          </div>
        </div>

        <!-- TABLE -->
        <div class="orders-table-container">
          <table class="orders-table">
            <thead>
              <tr>
                <th>Order ID</th><th>Table</th><th>Items</th>
                <th>Total</th><th>Time</th><th>Status</th><th>Actions</th>
              </tr>
            </thead>
            <tbody id="orders-list"></tbody>
          </table>

          <div id="no-orders" style="display:none; text-align:center; padding:40px;">
            <i class="fas fa-inbox fa-3x" style="color:var(--gray);"></i>
            <h3 style="margin:20px 0 10px; color:var(--gray);">No Orders Yet</h3>
            <p style="color:var(--gray);">Orders will appear here once placed from POS.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
function updateOrderStats(orders) {
  const stats = { pending:0, preparing:0, ready:0, completed:0 };
  orders.forEach(order => {
    const status = order.status?.toLowerCase(); // ðŸ”§ FIX
    if (stats[status] !== undefined) stats[status]++;
  });
  pendingCount.textContent = stats.pending;
  preparingCount.textContent = stats.preparing;
  readyCount.textContent = stats.ready;
  completedCount.textContent = stats.completed;
}

// ðŸ”§ FIX: prevent duplicate timers
if (!window.timeIntervalSet) {
  window.timeIntervalSet = true;
  setInterval(updateTime, 60000);
}
</script>

<style>
.stat-pending{background:#ffc107;}
.stat-preparing{background:#007bff;}
.stat-ready{background:#28a745;}
.stat-completed{background:#6c757d;}
.orders-table-container{max-height:100%;}
</style>

</body>
</html>
