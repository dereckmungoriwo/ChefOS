<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Settings - ChefOS POS</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1><i class="fas fa-utensils"></i> ChefOS POS</h1>
      </div>
      
      <div class="sidebar-nav">
        <div class="nav-section">
          <h3>Menu</h3>
          <ul class="nav-links">
            <li><a href="pos.html"><i class="fas fa-cash-register"></i> POS</a></li>
            <li><a href="orders.html"><i class="fas fa-list"></i> Orders</a></li>
            <li><a href="kds.html"><i class="fas fa-utensils"></i> ChefOS Line</a></li>
          </ul>
        </div>
        
        <div class="nav-section">
          <h3>Management</h3>
          <ul class="nav-links">
            <li><a href="inventory.html"><i class="fas fa-boxes"></i> ChefOS Stock</a></li>
            <li><a href="reports.html"><i class="fas fa-chart-bar"></i> ChefOS Insights</a></li>
            <li><a href="settings.html" class="active"><i class="fas fa-cog"></i> Settings</a></li>
          </ul>
        </div>
      </div>
      
      <div class="settings-panel">
        <div class="theme-toggle">
          <span><i class="fas fa-moon"></i> Dark Mode</span>
          <label class="toggle-switch">
            <input type="checkbox" id="themeToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
      
      <div class="help-center">
        <h4><i class="fas fa-life-ring"></i> Help Center</h4>
        <div class="contact-info">
          <a href="mailto:dereck@dereckmungoriwo.online">
            <i class="fas fa-envelope"></i> dereck@dereckmungoriwo.online
          </a>
          <a href="https://wa.me/27717184048" target="_blank">
            <i class="fab fa-whatsapp"></i> +27 71 718 4048
          </a>
          <div>
            <i class="fas fa-clock"></i> 24/7 Support
          </div>
        </div>
      </div>
      
      <a href="login.html" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
    </aside>

    <div class="main-content">
      <div class="top-bar">
        <div class="time-display" id="currentTime">Loading time...</div>
        <div class="user-info">
          <div class="user-avatar">DM</div>
          <div>
            <div style="font-weight: 600; color: var(--dark);">Dereck Mungoriwo</div>
            <div style="font-size: 14px; color: var(--gray);">Manager</div>
          </div>
        </div>
      </div>

      <div class="settings-container">
        <h2><i class="fas fa-cog"></i> Settings</h2>
        
        <div class="settings-grid">
          <div class="setting-card">
            <h3><i class="fas fa-palette"></i> Appearance</h3>
            <p>Customize the look and feel of your POS system</p>
            <div class="theme-toggle" style="margin-top: 20px;">
              <span>Dark Mode</span>
              <label class="toggle-switch">
                <input type="checkbox" id="themeToggleMain">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          
          <div class="setting-card">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <p>Configure order and system notifications</p>
            <button class="btn btn-primary" style="margin-top: 20px;" onclick="alert('Notification settings coming soon!')">
              <i class="fas fa-cog"></i> Configure
            </button>
          </div>
          
          <div class="setting-card">
            <h3><i class="fas fa-print"></i> Printer Settings</h3>
            <p>Configure receipt and kitchen printers</p>
            <button class="btn btn-primary" style="margin-top: 20px;" onclick="alert('Printer settings coming soon!')">
              <i class="fas fa-print"></i> Setup Printer
            </button>
          </div>
          
          <div class="setting-card">
            <h3><i class="fas fa-database"></i> Data Management</h3>
            <p>Backup and restore your POS data</p>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
              <button class="btn btn-success" onclick="backupData()">
                <i class="fas fa-download"></i> Backup
              </button>
              <button class="btn btn-secondary" onclick="clearData()">
                <i class="fas fa-trash"></i> Clear All
              </button>
            </div>
          </div>
          
          <div class="setting-card">
            <h3><i class="fas fa-users"></i> User Management</h3>
            <p>Manage staff accounts and permissions</p>
            <button class="btn btn-primary" style="margin-top: 20px;" onclick="alert('User management coming soon!')">
              <i class="fas fa-user-plus"></i> Manage Users
            </button>
          </div>
          
          <div class="setting-card">
            <h3><i class="fas fa-life-ring"></i> Support</h3>
            <p>Get help and contact support</p>
            <div style="margin-top: 20px;">
              <a href="mailto:dereck@dereckmungoriwo.online" class="btn btn-primary" style="display: inline-block; text-decoration: none; margin-right: 10px;">
                <i class="fas fa-envelope"></i> Email Support
              </a>
              <a href="https://wa.me/27717184048" target="_blank" class="btn btn-success" style="display: inline-block; text-decoration: none;">
                <i class="fab fa-whatsapp"></i> WhatsApp
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Theme Toggle
    const themeToggle = document.getElementById('themeToggle');
    const themeToggleMain = document.getElementById('themeToggleMain');
    const currentTime = document.getElementById('currentTime');
    
    // Check for saved theme
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-theme');
      if (themeToggle) themeToggle.checked = true;
      if (themeToggleMain) themeToggleMain.checked = true;
    }
    
    // Theme toggle event
    function toggleTheme() {
      if (this.checked) {
        document.body.classList.add('dark-theme');
        localStorage.setItem('theme', 'dark');
        // Sync both toggles
        if (themeToggle) themeToggle.checked = true;
        if (themeToggleMain) themeToggleMain.checked = true;
      } else {
        document.body.classList.remove('dark-theme');
        localStorage.setItem('theme', 'light');
        // Sync both toggles
        if (themeToggle) themeToggle.checked = false;
        if (themeToggleMain) themeToggleMain.checked = false;
      }
    }
    
    if (themeToggle) themeToggle.addEventListener('change', toggleTheme);
    if (themeToggleMain) themeToggleMain.addEventListener('change', toggleTheme);
    
    // Backup Data
    function backupData() {
      const data = {
        orders: localStorage.getItem('chefos_orders'),
        completedOrders: localStorage.getItem('chefos_completed_orders'),
        inventory: localStorage.getItem('chefos_inventory'),
        inventoryDetailed: localStorage.getItem('chefos_inventory_detailed'),
        cart: localStorage.getItem('chefos_cart'),
        theme: localStorage.getItem('theme'),
        backupDate: new Date().toISOString()
      };
      
      const dataStr = JSON.stringify(data, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `chefos-backup-${new Date().toISOString().split('T')[0]}.json`;
      link.click();
      URL.revokeObjectURL(url);
      
      alert('✅ Data backup downloaded successfully!');
    }
    
    // Clear All Data
    function clearData() {
      if (!confirm('⚠️ Are you sure you want to clear ALL data? This cannot be undone!')) return;
      if (!confirm('⚠️ FINAL WARNING: This will delete all orders, inventory, and settings!')) return;
      
      localStorage.removeItem('chefos_orders');
      localStorage.removeItem('chefos_completed_orders');
      localStorage.removeItem('chefos_inventory');
      localStorage.removeItem('chefos_inventory_detailed');
      localStorage.removeItem('chefos_cart');
      
      alert('✅ All data has been cleared!');
      window.location.reload();
    }
    
    // Update time
    function updateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        hour12: true
      };
      if (currentTime) {
        currentTime.textContent = now.toLocaleDateString('en-US', options);
      }
    }
    
    updateTime();
    setInterval(updateTime, 60000);
  </script>
</body>
</html>
